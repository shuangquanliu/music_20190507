<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"/>
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
	</head>
	<!--
		移动端准备工作：
			1.meta标签
			2.清除元素默认样式（resetcss）
			3.清除系统滚动条
			4.取消浏览器默认行为
			5.点透处理（传透）
			6.适配（rem）
			7.模拟屏幕区域
	-->
	<body>
		<section id="wrap">
			<!--头部-->
			<header id="header">
				<!--上半部-->
				<div class="headerTop">
					<!--logo-->
					<h1 class="logo">
						<a href="javascript:;">
							<img src="img/logo.png" alt="" />
						</a>
					</h1>
					<!--菜单按钮-->
					<a href="javascript:;" class="menuBtn menuBtnClose"></a>
					<!--按钮排-->
					<div class="btns">
						<a href="javascript:;">搜索</a>
						<a href="javascript:;">登录</a>
						<a href="javascript:;">注册</a>
					</div>
				</div>
				<!--下半部-->
				<form class="search">
					<input type="text" placeholder="请输入搜索内容。。。"/>
					<input type="submit" value="搜索"/>
				</form>
				<!--遮罩层-->
				<ul class="mask">
					<li>
						<a href="javascript:;">首页</a>
					</li>
					<li>
						<a href="javascript:;">MV</a>
					</li>
					<li>
						<a href="javascript:;">悦单</a>
					</li>
					<li>
						<a href="javascript:;">V榜</a>
					</li>
					<li>
						<a href="javascript:;">音悦</a>
					</li>
					<li>
						<a href="javascript:;">商城</a>
					</li>
					<li>
						<a href="javascript:;">节目</a>
					</li>
					<li>
						<a href="javascript:;">饭团</a>
					</li>
					<li>
						<a href="javascript:;">资讯</a>
					</li>
					<li>
						<a href="javascript:;">我的家</a>
					</li>
					<li>
						<a href="javascript:;">APP下载</a>
					</li>
					<li>
						<a href="javascript:;">热门应用</a>
					</li>
				</ul>
			</header>
			
			<div id="conWrap">	
			<!--内容区域-->
				<section id="content">
				<!--导航-->
				<nav class="navWrap">
					<ul class="navList">
						<li class="active">
							<a href="javascript:;">首页</a>
						</li>
						<li>
							<a href="javascript:;">MV</a>
						</li>
						<li>
							<a href="javascript:;">悦单</a>
						</li>
						<li>
							<a href="javascript:;">V榜</a>
						</li>
						<li>
							<a href="javascript:;">音悦</a>
						</li>
						<li>
							<a href="javascript:;">商城</a>
						</li>
						<li>
							<a href="javascript:;">节目</a>
						</li>
						<li>
							<a href="javascript:;">饭团</a>
						</li>
						<li>
							<a href="javascript:;">资讯</a>
						</li>
						<li>
							<a href="javascript:;">我的家</a>
						</li>
						<li>
							<a href="javascript:;">APP下载</a>
						</li>
						<li>
							<a href="javascript:;">热门应用</a>
						</li>
					</ul>
				</nav>
				
				<!--无缝滑屏-->
				<div class="bannerWrap">
					<ul class="bannerList">
						<li><a href="javascript:;"><img src="img/1.jpg" alt="" /></a></li>
						<li><a href="javascript:;"><img src="img/2.jpg" alt="" /></a></li>
						<li><a href="javascript:;"><img src="img/3.jpg" alt="" /></a></li>
						<li><a href="javascript:;"><img src="img/4.jpg" alt="" /></a></li>
						<li><a href="javascript:;"><img src="img/5.jpg" alt="" /></a></li>
					</ul>
					<div class="icons">
						<span class="active"></span>
						<span></span>
						<span></span>
						<span></span>
						<span></span>
					</div>
				</div>
				<!--tab选项卡-->
				<section class="tab">
					<!--tab头部-->
					<header class="tabHeader">
						<h2>MV首播</h2>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<!--tab导航-->
					<nav class="tabNav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<span class="smallGreen"></span>
					</nav>
					<div class="tabWrap">
						<!--loading图-->
						<ul class="tabLoading"></ul>
						<!--tab 图片列表-->
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
						</ul>
						<!--loading图-->
						<ul class="tabLoading"></ul>
					</div>
				</section>
				
				<section class="tab">
					<!--tab头部-->
					<header class="tabHeader">
						<h2>MV首播</h2>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<!--tab导航-->
					<nav class="tabNav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<span class="smallGreen"></span>
					</nav>
					<div class="tabWrap">
						<!--loading图-->
						<ul class="tabLoading"></ul>
						<!--tab 图片列表-->
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
						</ul>
						<!--loading图-->
						<ul class="tabLoading"></ul>
					</div>
				</section>
				
				<section class="tab">
					<!--tab头部-->
					<header class="tabHeader">
						<h2>MV首播</h2>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<!--tab导航-->
					<nav class="tabNav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<span class="smallGreen"></span>
					</nav>
					<div class="tabWrap">
						<!--loading图-->
						<ul class="tabLoading"></ul>
						<!--tab 图片列表-->
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
						</ul>
						<!--loading图-->
						<ul class="tabLoading"></ul>
					</div>
				</section>
				
				<section class="tab">
					<!--tab头部-->
					<header class="tabHeader">
						<h2>MV首播</h2>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<!--tab导航-->
					<nav class="tabNav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<span class="smallGreen"></span>
					</nav>
					<div class="tabWrap">
						<!--loading图-->
						<ul class="tabLoading"></ul>
						<!--tab 图片列表-->
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
						</ul>
						<!--loading图-->
						<ul class="tabLoading"></ul>
					</div>
				</section>
				<section class="tab">
					<!--tab头部-->
					<header class="tabHeader">
						<h2>MV首播</h2>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<!--tab导航-->
					<nav class="tabNav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<span class="smallGreen"></span>
					</nav>
					<div class="tabWrap">
						<!--loading图-->
						<ul class="tabLoading"></ul>
						<!--tab 图片列表-->
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
						</ul>
						<!--loading图-->
						<ul class="tabLoading"></ul>
					</div>
				</section>
				
				<section class="tab">
					<!--tab头部-->
					<header class="tabHeader">
						<h2>MV首播</h2>
						<a href="javascript:;">更多&gt;</a>
					</header>
					<!--tab导航-->
					<nav class="tabNav">
						<a href="javascript:;">全部</a>
						<a href="javascript:;">内地</a>
						<a href="javascript:;">港台</a>
						<a href="javascript:;">欧美</a>
						<a href="javascript:;">韩国</a>
						<a href="javascript:;">日本</a>
						<span class="smallGreen"></span>
					</nav>
					<div class="tabWrap">
						<!--loading图-->
						<ul class="tabLoading"></ul>
						<!--tab 图片列表-->
						<ul class="tabList">
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="" />
									<span>君に贈る花がない</span>
								</a>
								<div class="ice">
									<div class="left">
										<span class="icePic"></span>
										<span>9966</span>
									</div>
									<div class="right">
										<span class="icePic"></span>
										<span>88</span>
									</div>
								</div>
							</li>
						</ul>
						<!--loading图-->
						<ul class="tabLoading"></ul>
					</div>
				</section>
				
				
			</section>
			</div>
						
		</section>
		<div id="scrollBar">
			
		</div>
	</body>
	<script type="text/javascript" src="js/transform.js"></script>
	<script type="text/javascript" src="js/drag.js"></script>
	<script type="text/javascript">
		//取消浏览器默认行为
		document.addEventListener('touchstart',function(event){
			event.preventDefault();
		});
		//点透处理
		!(function(){
			var aNodes = document.querySelectorAll('a');
			for (var i=0;i<aNodes.length;i++) {
				aNodes[i].addEventListener('touchstart',function(){
					window.location.href = this.href;
				});
			};
		})();
		//rem适配
		!(function(){
			var width = document.documentElement.clientWidth;
			var styleNode = document.createElement('style');
			styleNode.innerHTML = 'html{font-size: '+ width/16 +'px !important;}'
			document.head.appendChild(styleNode);
		})();
		
		window.onload = function(){
			menu();
			changeFocus();
			nav();
			changeColor();
			banner();
			tab();
			conDrag();
		};
		
		function conDrag(){
			var conWrap = document.getElementById('conWrap');
			var scrollBar = document.getElementById('scrollBar');
			var content = document.getElementById('content')
			
			//滚动条高度
			var scale = document.documentElement.clientHeight/content.offsetHeight;
			scrollBar.style.height = scale * document.documentElement.clientHeight + 'px';
		
			//竖向滑屏
			//处理滚动条
			var callback = {
				//touchstart
				start : function(){
					//滚动条显示
					scrollBar.style.opacity = '1';
				},
				//touchmove + 加速状态
				move : function(){
					//滚动条显示
					scrollBar.style.opacity = '1';
					//滚动条移动
					//滚动条的偏移量 = 内容偏移量 * scale
					var contentDis = transformCss(content,'translateY')*scale;
					transformCss(scrollBar,'translateY',-contentDis)
				},
				//元素停止的状态
				end :function(){
					//滚动条消失
					scrollBar.style.opacity = '0';
				}
			}
			drag(conWrap,callback);
		};
		
		//tab选项卡
		function tab(){
			var tabWrap = document.querySelectorAll('#wrap #content .tab .tabWrap');
			var tabNav = document.querySelectorAll('#wrap #content .tab .tabNav');
			var translateX = tabNav[0].offsetWidth;
			
			for (var i = 0;i<tabWrap.length;i++) {				
				move(tabWrap[i],tabNav[i]);
			}
			
			function move(tabWrap,tabNav){
				//让中间ul图片列表显示
				transformCss(tabWrap,'translateX',-translateX);
				
				//定义元素的初始位置
				var eleX = 0;
				//定义手指初始位置
				var startX = 0;
				
				//防抖动
				var startY = 0;
				var isFirst = true;
				
				//loading出现逻辑是否执行，默认情况是没有loading图
				var isLoad = false;
				var tabLoadings = tabWrap.querySelectorAll('.tabLoading')
//				console.log(tabLoadings.length)

				//小绿
				var aNodes = tabNav.querySelectorAll('a');
				var smallGreen = tabNav.querySelector('.smallGreen')
				var aIndex = 0;
				
				
				//手指按下
				tabWrap.addEventListener('touchstart',function(event){
					var touch = event.changedTouches[0];
					if(isLoad){
						return;
					};
					//清除过渡
					tabWrap.style.transition = 'none';
					
					//元素的初始位置
					eleX = transformCss(tabWrap,'translateX');
					//手指初始位置
					startX = touch.clientX;
					startY = touch.clientY;
					
					//重置：防抖动
					isFirst = true;
				});				
				//手指移动
				tabWrap.addEventListener('touchmove',function(event){
					var touch = event.changedTouches[0];
					
					if(isLoad){
						return;
					};
					
					if(!isFirst){
						return;
					};
					
					//手指结束位置
					var endX = touch.clientX;
					var endY = touch.clientY;
					//手指距离差
					var disX = endX - startX;
					var disY = endY - startY;
					
					//防抖动
					if(Math.abs(disY) > Math.abs(disX)){
						isFirst = false;
						return;
					}					
					//确定元素最终位置（手指移动）
					transformCss(tabWrap,'translateX',disX+eleX);
					
					//手指划过一半
					if(Math.abs(disX) > translateX/2){
						//load该出现
						isLoad = true;
						
						var target = 0;
						if(disX < 0){
							target = -2*translateX;
						}else{
							target = 0;
						}
						//过渡
						tabWrap.style.transition = '1s';
						//手指划过一半产生的最终位置
						transformCss(tabWrap,'translateX',target);
						
						//小绿
						if(disX<0){
							aIndex = aIndex + 1;
						}else{
							aIndex = aIndex - 1;
						}
						if(aIndex > aNodes.length - 1){
							aIndex = 0
						}else if(aIndex < 0){
							aIndex = aNodes.length - 1;
						}
//						console.log(aIndex)
						smallGreen.style.transition = '0.5s';
						transformCss(smallGreen,'translateX',aNodes[aIndex].offsetLeft)
						
						
						//过渡结束之后，loading显示
						tabWrap.addEventListener('transitionend',fun);
						tabWrap.addEventListener('webkitTransitionEnd',fun);
						function fun(){
							//loading显示
							if(disX < 0){
								tabLoadings[1].style.opacity = '1'
							}else{
								tabLoadings[0].style.opacity = '1'
							};
							
							//模拟数据请求回来
							setTimeout(function(){
								//中间ul显示
								tabWrap.style.transition = 'none';
								transformCss(tabWrap,'translateX',-translateX);
								isLoad = false;
								//loading图隐藏
								for(var i=0;i<tabLoadings.length;i++){
									tabLoadings[i].style.opacity = '0'
								}
							},1000);
							
							
							//解绑操作
							tabWrap.removeEventListener('transitionend',fun);
							tabWrap.removeEventListener('webkitTransitionEnd',fun)
						}
						
						
						
					};
					
				});	
				//手指离开
				tabWrap.addEventListener('touchend',function(event){
					var touch = event.changedTouches[0];
					
					if(isLoad){
						return;
					};
					
					//手指结束位置
					var endX = touch.clientX;
					//手指距离差
					var disX = endX - startX;
					
					//手指没有划过一半
					if(Math.abs(disX) < translateX/2){
						//过渡
						tabWrap.style.transition = '0.5s';
						transformCss(tabWrap,'translateX',-translateX);
					}
					
				});
				
			};
			
		}
		
		//轮播图		
		function banner(){
				var bannerWrap = document.querySelector('#wrap #content .bannerWrap');
				var bannerList = document.querySelector('#wrap #content .bannerWrap .bannerList');
				//无缝的结构，后面再加一套；
				bannerList.innerHTML += bannerList.innerHTML;								
				var liNodes = document.querySelectorAll('#wrap #content .bannerWrap .bannerList li');
				var spanNodes = document.querySelectorAll('#wrap #content .bannerWrap .icons span');
				//动态的去设置结构的宽度，因为这样可以根据li的个数，自动计算宽度；
				var styleNode = document.createElement('style');
				styleNode.innerHTML = '#wrap #content .bannerWrap .bannerList{width: '+ liNodes.length +'00%;}';
				styleNode.innerHTML += '#wrap #content .bannerWrap .bannerList li{width: '+ 100/liNodes.length +'%;}';
				document.head.appendChild(styleNode);
				
				//行为
				var startX = 0;
				var startY = 0;
				var eleX = 0;
	//			var disX = 0;
				var index = 0;
				var isFirst = true;
				var timer = null;
				
				
				bannerWrap.addEventListener('touchstart',function(event){
					var touch = event.changedTouches[0];
					bannerList.style.transition = 'none';
					//处理无缝的逻辑
					var lastX = 0;
					if(index == 0){
						index = spanNodes.length;
						lastX = -index * document.documentElement.clientWidth;
						transformCss(bannerList,'translateX',lastX);
					}else if(index == liNodes.length - 1){
						index = spanNodes.length - 1;
						lastX = -index * document.documentElement.clientWidth;
						transformCss(bannerList,'translateX',lastX);
					}
										
					eleX = transformCss(bannerList,'translateX');
					startX = touch.clientX;
					startY = touch.clientY;
					//防抖动重置
					isFirst = true;
					//清除自动轮播定时器
					//clearInterval(timer);
				});
				
				bannerWrap.addEventListener('touchmove',function(event){
					var touch = event.changedTouches[0];
					
					
					//如果第一次已经判断为竖向滑屏，那么后面每一次的move逻辑，横向都不需要执行。
					if(!isFirst){
						return;
					}
					
					var endX = touch.clientX;
					var endY = touch.clientY;
					var disX = endX - startX;
					var disY = endY - startY;
					
					//第一次进来move,我们就判断垂直方向和水平方向的距离差，如果第一次竖向就大于横向，那么代表
					//永远用户这一轮是竖向滑屏
					if(Math.abs(disY) > Math.abs(disX)){
						isFirst = false;
						return;
					}
					
					
					var lastX = eleX + disX;
					transformCss(bannerList,'translateX',lastX);
					
				});
				
				bannerWrap.addEventListener('touchend',function(event){
					var touch = event.changedTouches[0];
					
					//现在我们想让图片从第0张 变换到第一张，也就是说我们的元素要走  -1 * 图片宽度
					var lastX = transformCss(bannerList,'translateX');//这个值是move最后抬起一瞬间的值，和end重合
					index = Math.round(-lastX/document.documentElement.clientWidth);
					//根据索引和图片宽度求出元素最终要到达的位置
					lastX = -index * document.documentElement.clientWidth;
					bannerList.style.transition = '1s';
					transformCss(bannerList,'translateX',lastX);
					
					//小圆点的逻辑
					for(var i = 0; i < spanNodes.length; i++){
						spanNodes[i].className = '';
					}
					
					spanNodes[index%spanNodes.length].className = 'active';
					
					//autoRun();
					
				});
				
				//autoRun();
				function autoRun(){
					timer = setInterval(function(){
						if(index == 9){
							index = 4;
							var lastX = -index * document.documentElement.clientWidth;
							bannerList.style.transition = 'none';
							transformCss(bannerList,'translateX',lastX);
						}
						
						setTimeout(function(){
							index++;
							var lastX = -index * document.documentElement.clientWidth;
							bannerList.style.transition = '1s';
							transformCss(bannerList,'translateX',lastX);
							
							//小圆点的逻辑
							for(var i = 0; i < spanNodes.length; i++){
								spanNodes[i].className = '';
							}
							
							spanNodes[index%spanNodes.length].className = 'active';
							
						},20);
						
						
					},2000);
				}
			}
		
			
		
		//点击变色
		
		function changeColor(){
			var liNodes = document.querySelectorAll('#wrap #content .navWrap .navList li')
						
			for (var i =0;i<liNodes.length;i++) {
				//误触
				var isMove = false;
				//给每一个li添加touchmove
				liNodes[i].addEventListener('touchmove',function(){
					isMove = true;
				})
				//给每一个li添加touchend
				liNodes[i].addEventListener('touchend',function(){
					if(!isMove){
						//给每一个li添加 class = '' , 目的是为了覆盖之前的class
						for (var j=0;j<liNodes.length;j++) {
							liNodes[j].className = ''
						}
						//点击谁，谁添加 class='active'
						this.className = 'active';
					}
					//更新isMove（重置）
					isMove = false;
				});
			}
			
		}
		
		
		//导航
		
		function nav(){
			var navWrap = document.querySelector('#wrap #content .navWrap');
			var navList = document.querySelector('#wrap #content .navWrap .navList')
			
			//定义元素的初始位置
			var eleX = 0;
			//定义手指初始位置
			var startX = 0;
			
			//加速
			var s1 = 0;
			var t1 = 0;
			var s2 = 0;
			var t2 = 0;
			var disS = 0;
			var disT = 1; //定义一个非零数字
			
			
			//手指按下
			navWrap.addEventListener('touchstart',function(event){
				var touch = event.changedTouches[0];
				
				//清除过渡
				navList.style.transition = 'none';
				
				//元素的初始位置
				eleX = transformCss(navList,'translateX');
				//手指初始位置
				startX = touch.clientX;
				
				//加速：元素初始位置与初始时间
				s1 = eleX;
				t1 = new Date().getTime(); //毫秒
				//清除上一次的速度 
				disS = 0;
			});
			//手指移动
			navWrap.addEventListener('touchmove',function(event){
				var touch = event.changedTouches[0];
				//手指结束位置
				var endX = touch.clientX;
				//手指距离差
				var disX = endX - startX;
				
				//范围限定
				var lastX = disX+eleX;
				if(lastX > 0){
					//比例：逐渐减小
					// scale = 1 - lastX/375
					//scale = 1 - 左边留白/屏幕宽
					var scale = 0.6 - lastX/(document.documentElement.clientWidth*3.5);
//					console.log(scale)
					
					//lastX（左边留白） 整体是增加的，但是每一次增加的幅度在减小
					//lastX = 左边临界值0基础上产生 + 之前左边留白*比例
					lastX = 0 + lastX*scale;
//					console.log('现在的lastX= '+lastX)
							//4.8       4.667      4.53
					//(5,4.933) (10,9.733) (15,14.4) (20,18.93)
				}else if(lastX < document.documentElement.clientWidth-navList.offsetWidth){
					//比例：逐渐减小（正值）					
					//右边留白 = lastX（正值） - 右边临界值（正值）
					var right = Math.abs(lastX)-Math.abs(document.documentElement.clientWidth-navList.offsetWidth)
					//scale = 1 - 右边留白/屏幕宽
					var scale = 0.6 - right/(document.documentElement.clientWidth*3.5);
					
					//右边留白整体是增加的，但是每一次增加的幅度在减小
					//lastX = 右边临界值基础上产生 + 之前左边留白*比例
					lastX = document.documentElement.clientWidth-navList.offsetWidth - right*scale;
				}
				
				//确定元素最终位置
				transformCss(navList,'translateX',lastX);
//				console.log('lastX = '+lastX)
				
				//加速：元素结束位置与结束时间
				s2 = lastX;
				t2 = new Date().getTime();
				//距离差
				disS = s2 - s1;
				//时间差
				disT = t2 - t1;
				
			});
			//加速，回弹
			navWrap.addEventListener('touchend',function(){
				//速度 = 距离差/时间差
				var speed = disS/disT;
//				var speed = disS/(t2 - t1);
//				console.log('speed='+speed)
				
				//目标位置 = touchmove产生的位移值 + 速度产生位移值
				var target = transformCss(navList,'translateX')+speed*100;
//				console.log('translateX = '+transformCss(navList,'translateX'))
//				console.log('target = '+target)
				
				//回弹
				var bezier = 'linear';
				if(target > 0){
					bezier = 'cubic-bezier(0,1.39,.91,1.51)';
					target = 0
					
				}else if(target < document.documentElement.clientWidth-navList.offsetWidth){
					bezier = 'cubic-bezier(0,1.39,.91,1.51)';
					target = document.documentElement.clientWidth-navList.offsetWidth;
				}
				
				//过渡
				navList.style.transition = '1s '+bezier;
				//把元素移动到目标位置上 （写）
				transformCss(navList,'translateX',target)
			});
			
		};
		
		
		
		//点击获取焦点与失去焦点
		//由于有的手机 把 input 获取焦点的动作，放在了浏览器的默认行为中
		//之前我们加了一个 取消浏览器默认行为，所以导致有的手机不能获取焦点
		//通过js动态设置获取焦点事件
		//该效果需要在手机上测试，不能在模拟测试
		
		function changeFocus(){
			var inputNode = document.querySelector('#wrap #header .search input[type="text"]');
			
			inputNode.addEventListener('touchstart',function(event){
				//获取焦点
				inputNode.focus();
				//取消冒泡
				event.stopPropagation();
//				console.log('获取焦点')
			});
			document.addEventListener('touchstart',function(){
				//失去焦点
				inputNode.blur();
//				console.log('失去焦点')
			});
			
		};
		
		
		//菜单按钮
		
		function menu(){		
			var menuBtn = document.querySelector('#wrap #header .headerTop .menuBtn');
			var mask = document.querySelector('#wrap #header .mask')
			
			var flag = true;
			
			menuBtn.addEventListener('touchstart',function(event){
				if(flag){
					//关闭 --- 开启   --- 遮罩层显示
					menuBtn.className = 'menuBtn menuBtnOpen'
					mask.style.display = 'block'
				}else{
					//开启 --- 关闭  --- 遮罩层隐藏
					menuBtn.className = 'menuBtn menuBtnClose'
					mask.style.display = 'none'
				}
				//更新flag
				flag = !flag;
				//取消冒泡（阻止冒泡）
				event.stopPropagation();
				event.preventDefault();
			})
			document.addEventListener('touchstart',function(){
				//元素状态必须是开启状态 --- flag = fasle
				if(!flag){
					//开启 --- 关闭  --- 遮罩层隐藏
					menuBtn.className = 'menuBtn menuBtnClose'
					mask.style.display = 'none'
					flag = true;
				};
			});
			mask.addEventListener('touchstart',function(event){
				//取消冒泡（阻止冒泡）
				event.stopPropagation();
				event.preventDefault();
			});
		}
	</script>
</html>
